
<style>
    .collapsible-body p {
        margin: 0;
        padding: 5px;
    }

    .custom-item{
        padding-right: 3px;
        padding-left: 13px;
        height: 30px;
    }

    .custom-item:hover{
        background-color: #dcdcdc;
        cursor: pointer;
    }
    .loader-info-note{
        text-align: center;
        font-size: 40px;
        color: #CCC;
    }
</style>


<!--<div class="row">-->
    <!--<div ng-include="'views/family_planning/fp_filters.html'"></div>-->
<!--</div>-->

<div class="row" >
    <!--menus-->
    <div ng-include="'views/family_planning/fp_menu.html'"></div>
    <!--cards-->


    <div class="col s12 m12 l10" style="margin-top: 82px">
        <div class="section">
            <!--<div class="{{ fpCards[0].cardClass }}" style="padding-left: 0px">-->
            <!--<div portal-card="" dataobject='fpCards[0]'></div>-->
            <!--</div>-->

            <!--<div class="{{ fpCards[1].cardClass }}" style="padding-left: 0px">-->
            <!--<div portal-card="" dataobject='fpCards[1]'></div>-->
            <!--</div>-->

            <div>
                <h4>Monthly PDF Reports</h4>
            </div>

            <div ng-if="showReportSection" class="col">
                <form>
                    <p>
                        <button  class="btn btn-info" ng-click="previewReport()">Data criteria</button><br>
                    </p>
                </form>
            </div>

            <div class="col s12 m12">
                <div ng-if="!showReportSection" class="card">
                    <div class="col" style="width: 50%">

                        <!--orgunit selection section-->
                        <div class="row">
                            <form>
                                <label>Organisation Unit:</label>
                                <div class="form-group" >
                                    <multi-select-tree
                                            data-input-model="data.orgUnitTree4"
                                            multi-select="false"
                                            data-output-model="data.outRegistrationOrganisationUnits"
                                            data-default-label="Select Organization Unit"
                                            data-callback="selectOnly1Or2(item, selectedItems)">
                                    </multi-select-tree>
                                </div>
                            </form>
                        </div>
                        <!--orgunit selection section-->

                         <!--period section-->
                        <div class="row">
                            <form>
                                <label>Period:</label>
                                <div class="form-group">
                                    <div class="input-field col grey lighten-5" style="margin-top: 0px;width: 100%;">
                                        <div class="col input-field" style="width: 45%;margin-left: 5%">
                                            <select ng-model="selectedYear" ng-change="updatePeriod(selectedYear)" material-select watch >
                                                <option value="2018">2018</option>
                                                <option value="2017">2017</option>
                                                <option value="2016">2016</option>
                                                <option value="2015">2015</option>
                                                <option value="2014">2014</option>
                                            </select>
                                        </div>
                                        <style>
                                            .months ul.dropdown-content li:last-child{
                                                display:none
                                            }
                                        </style>
                                        <div class="col input-field months" style="width: 45%">
                                            <select  ng-change="updateMonth(data.selectedMonth)" ng-model="data.selectedMonth" material-select watch>
                                                <option value="{{selectedYear}}01">January</option>
                                                <option value="{{selectedYear}}02">February</option>
                                                <option value="{{selectedYear}}03">March</option>
                                                <option value="{{selectedYear}}04">April</option>
                                                <option value="{{selectedYear}}05">May</option>
                                                <option value="{{selectedYear}}06">June</option>
                                                <option value="{{selectedYear}}07">July</option>
                                                <option value="{{selectedYear}}08">August</option>
                                                <option value="{{selectedYear}}09">September</option>
                                                <option value="{{selectedYear}}10">October</option>
                                                <option value="{{selectedYear}}11">November</option>
                                                <option value="{{selectedYear}}12">December</option>
                                                <option>{{selectedYear}}12</option>
                                                <!--<option ng-repeat="month in monthList" value="{{selectedYear}}{{month.value}}">{{selectedYear}}{{month.value}}</option>
                                                <option></option>-->
                                            </select>
                                        </div>
                                    </div>
                                </div>
                            </form>
                        </div>
                        <!--end period section-->

                        <!--preview button section-->
                        <!--<div class="col" style="width: 6%;">-->
                            <!--<form>-->
                                <!--<p>-->
                                    <!--<button  class="btn btn-info" ng-click="previewReport()">Preview</button><br>-->
                                <!--</p>-->
                            <!--</form>-->
                        <!--</div>-->
                        <!--end preview button section-->

                    </div>
                    <div class="row" style="padding-left: 13px">
                        <form >
                        <h5 style="text-align: center"> Subscribe for monthly reports</h5>
                        <p style="width: 40%; display: inline-flex">Name *:<br><input type="text" placeholder="Name" ng-model="newUser.name" ></p>
                        <p style="width: 40%; display: inline-flex">Email *:<input type="email" placeholder="Email Address" ng-model="newUser.email"></p>
                        </form>
                    </div>

                    <div class="row" style="display: flex;">

                        <div style="margin-left: 20%">
                            <button  class="btn btn-info" ng-click="previewReport()">Preview</button><br>
                        </div>

                        <div style="margin-left: 40%">
                            <button ng-if="newUser.name !== '' && newUser.email !== '' && data.outRegistrationOrganisationUnits.length !== 0"
                                    class="btn btn-info" ng-click="addSubscriber()">Subscribe</button><br>
                        </div>
                    </div>


                </div>

                 <!--card section 02 with tables-->
                <div ng-if="showReportSection" class="card">
                    <div id="loadingMessage" class="row">
                        <!--LOADER ANIMATIONS-->
                        <div style="width: 100%;text-align: center">
                            <div id="loader" style="text-align:center">
                                <svg width='170px' height='170px' xmlns="http://www.w3.org/2000/svg" viewBox="0 0 100 100"
                                     preserveAspectRatio="xMidYMid" class="uil-balls">
                                    <rect x="0" y="0" width="100" height="100" fill="none" class="bk"></rect>
                                    <g transform="rotate(0 50 50)">
                                        <circle r="5" cx="30" cy="50">
                                            <animateTransform attributeName="transform" type="translate" begin="0s" repeatCount="indefinite"
                                                              dur="0.5s" values="0 0;29.999999999999996 -17.320508075688775"
                                                              keyTimes="0;1"/>
                                            <animate attributeName="fill" dur="0.5s" begin="0s" repeatCount="indefinite" keyTimes="0;1"
                                                     values="#c5523f;#f2b736"/>
                                        </circle>
                                    </g>
                                    <g transform="rotate(120 50 50)">
                                        <circle r="5" cx="30" cy="50">
                                            <animateTransform attributeName="transform" type="translate" begin="0s" repeatCount="indefinite"
                                                              dur="0.5s" values="0 0;29.999999999999996 -17.320508075688775"
                                                              keyTimes="0;1"/>
                                            <animate attributeName="fill" dur="0.5s" begin="0s" repeatCount="indefinite" keyTimes="0;1"
                                                     values="#f2b736;#499255"/>
                                        </circle>
                                    </g>
                                    <g transform="rotate(240 50 50)">
                                        <circle r="5" cx="30" cy="50">
                                            <animateTransform attributeName="transform" type="translate" begin="0s" repeatCount="indefinite"
                                                              dur="0.5s" values="0 0;29.999999999999996 -17.320508075688775"
                                                              keyTimes="0;1"/>
                                            <animate attributeName="fill" dur="0.5s" begin="0s" repeatCount="indefinite" keyTimes="0;1"
                                                     values="#499255;#c5523f"/>
                                        </circle>
                                    </g>
                                </svg>
                            </div>
                            <div class="loader-info-note"> Loading report... </div>
                        </div>
                    </div>


                    <div class="row" style="height: 900px">
                        <iframe ng-src="{{link}}" id="monthlyReportFrame" frameborder="0" width="100%" height="100%" style="margin-top: 10px"></iframe>
                    </div>

                    <script>
                        $('#monthlyReportFrame').ready(function () {
                            $('#loadingMessage').css('display', 'visible');
                        });
                        $('#monthlyReportFrame').load(function () {
                            $('#loadingMessage').css('display', 'none');
                        });
                    </script>

                </div>
                <!--End of card section 02 with tables-->

            </div>

        </div>
    </div>
</div>

